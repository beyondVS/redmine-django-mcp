description = "사용자 요구 사항에 따라 현재 기능에 대한 맞춤형 체크리스트를 생성합니다."

prompt = """
---
description: 사용자 요구 사항에 따라 현재 기능에 대한 맞춤형 체크리스트를 생성합니다.
---

## 체크리스트 목적: "한국어를 위한 단위 테스트"

**핵심 개념**: 체크리스트는 **요구 사항 작성에 대한 단위 테스트**입니다. 주어진 도메인에서 요구 사항의 품질, 명확성 및 완전성을 검증합니다.

**검증/테스트용이 아님**:
- ❌ "버튼이 올바르게 클릭되는지 확인"이 아님
- ❌ "에러 처리가 작동하는지 테스트"가 아님
- ❌ "API가 200을 반환하는지 확인"이 아님
- ❌ 코드/구현이 사양과 일치하는지 확인하는 것이 아님

**요구 사항 품질 검증용**:
- ✅ "모든 카드 유형에 대해 시각적 계층 구조 요구 사항이 정의되었는가?" (완전성)
- ✅ "'눈에 띄는 표시'가 특정 크기/위치로 정량화되었는가?" (명확성)
- ✅ "모든 상호작용 요소에서 호버 상태 요구 사항이 일관적인가?" (일관성)
- ✅ "키보드 내비게이션에 대한 접근성 요구 사항이 정의되었는가?" (커버리지)
- ✅ "로고 이미지 로드 실패 시 어떻게 되는지 사양에 정의되어 있는가?" (예외 케이스)

**비유**: 사양이 한국어로 작성된 코드라면, 체크리스트는 그에 대한 단위 테스트 스위트입니다. 요구 사항이 잘 작성되었는지, 완전한지, 모호하지 않은지, 구현 준비가 되었는지를 테스트하는 것이지 구현이 작동하는지를 테스트하는 것이 아닙니다.

## 사용자 입력

```text
$ARGUMENTS
```

진행하기 전에 사용자 입력이 비어 있지 않다면 이를 **반드시** 고려해야 합니다.

## 실행 단계

1. **설정**: 저장소 루트에서 다음 스크립트를 실행하고 FEATURE_DIR 및 AVAILABLE_DOCS 목록에 대한 JSON을 구문 분석합니다.
   - **Windows**: `.specify/scripts/powershell/check-prerequisites.ps1 --json`
   - **그 외**: `.specify/scripts/bash/check-prerequisites.sh --json`
   - 모든 파일 경로는 절대 경로여야 합니다.
   - "I'm Groot"와 같이 인자에 작은따옴표가 포함된 경우 이스케이프 구문을 사용하십시오: 예: 'I'\\''m Groot' (또는 가능하면 큰따옴표: "I'm Groot").

2. **의도 명확화 (동적)**: 최대 3개의 초기 컨텍스트 명확화 질문을 도출합니다 (미리 정의된 목록 없음). 질문은 반드시:
   - 사용자의 문구 + spec/plan/tasks에서 추출된 신호를 바탕으로 생성되어야 함
   - 체크리스트 내용에 실질적인 변화를 주는 정보만 질문해야 함
   - `$ARGUMENTS`에서 이미 명확한 경우 개별적으로 생략해야 함
   - 광범위함보다 정밀함을 우선시해야 함

   생성 알고리즘:
   1. 신호 추출: 기능 도메인 키워드(예: auth, latency, UX, API), 위험 지표("critical", "must", "compliance"), 이해관계자 힌트("QA", "review", "security team"), 명시적 인도물("a11y", "rollback", "contracts").
   2. 관련성에 따라 순위가 매겨진 후보 집중 영역(최대 4개)으로 신호를 클러스터링합니다.
   3. 명시적이지 않은 경우 예상 독자 및 시점(작성자, 검토자, QA, 출시)을 식별합니다.
   4. 누락된 차원 탐지: 범위의 폭, 깊이/엄격함, 위험 강조, 제외 경계, 측정 가능한 수락 기준.
   5. 다음 아키타입에서 선택된 질문을 작성합니다:
      - 범위 세분화 (예: "여기에 X 및 Y와의 통합 접점이 포함되어야 합니까, 아니면 로컬 모듈의 정확성으로 제한되어야 합니까?")
      - 위험 우선순위 지정 (예: "이러한 잠재적 위험 영역 중 어떤 영역에 필수 게이트 체크를 적용해야 합니까?")
      - 깊이 보정 (예: "이것은 가벼운 프리커밋 무결성 목록입니까, 아니면 공식적인 출시 게이트입니까?")
      - 독자 프레이밍 (예: "이것은 작성자만 사용합니까, 아니면 PR 검토 중에 동료들이 사용합니까?")
      - 경계 제외 (예: "이번 라운드에서 성능 튜닝 항목을 명시적으로 제외해야 합니까?")
      - 시나리오 클래스 공백 (예: "복구 흐름이 감지되지 않았습니다. 롤백 / 부분 실패 경로가 범위에 포함됩니까?")

   질문 형식 규칙:
   - 옵션을 제시하는 경우 '옵션 | 후보 | 중요한 이유' 열이 있는 요약 표를 생성합니다.
   - 최대 A–E 옵션으로 제한합니다. 자유 형식 답변이 더 명확한 경우 표를 생략합니다.
   - 사용자가 이미 말한 내용을 다시 말하게 하지 마십시오.
   - 추측성 카테고리를 피하십시오 (환각 금지). 불확실한 경우 "X가 범위에 포함되는지 확인해 주세요"라고 명시적으로 질문하십시오.

   상호작용이 불가능할 때의 기본값:
   - 깊이: 표준 (Standard)
   - 독자: 코드 관련인 경우 검토자(PR); 그 외에는 작성자
   - 집중 영역: 상위 2개 관련성 클러스터

   질문을 출력합니다 (Q1/Q2/Q3 라벨). 답변 후 2개 이상의 시나리오 클래스(대체 / 예외 / 복구 / 비기능 도메인)가 여전히 불명확한 경우, 각각에 대한 한 줄 이유(예: "해결되지 않은 복구 경로 위험")와 함께 최대 2개의 추가 타겟 질문(Q4/Q5)을 할 수 있습니다. 총 5개 질문을 초과하지 마십시오. 사용자가 더 이상의 질문을 명시적으로 거부하면 생략합니다.

3. **사용자 요청 이해**: `$ARGUMENTS` + 명확화 답변을 결합합니다:
   - 체크리스트 테마 도출 (예: 보안, 검토, 배포, UX)
   - 사용자가 언급한 명시적 필수 항목 통합
   - 집중 영역 선택을 카테고리 스캐폴딩에 매핑
   - spec/plan/tasks에서 누락된 컨텍스트 추론 (환각 금지)

4. **기능 컨텍스트 로드**: FEATURE_DIR에서 읽습니다:
   - spec.md: 기능 요구 사항 및 범위
   - plan.md (있는 경우): 기술적 세부 사항, 의존성
   - tasks.md (있는 경우): 구현 작업

   **컨텍스트 로딩 전략**:
   - 활성 집중 영역과 관련된 필요한 부분만 로드합니다 (전체 파일 덤프 지양).
   - 긴 섹션을 요약된 시나리오/요구 사항 불렛으로 변환하는 것을 선호합니다.
   - 점진적 공개를 사용합니다: 공백이 감지된 경우에만 추가 조회를 수행합니다.
   - 소스 문서가 큰 경우 원본 텍스트를 포함하는 대신 임시 요약 항목을 생성합니다.

5. **체크리스트 생성** - "요구 사항에 대한 단위 테스트" 작성:
   - `FEATURE_DIR/checklists/` 디렉토리가 없으면 생성합니다.
   - 도메인에 기반한 짧고 설명적인 고유 체크리스트 파일명을 생성합니다:
     - 예: `ux.md`, `api.md`, `security.md`
     - 형식: `[domain].md`
     - 파일이 이미 존재하면 해당 파일에 추가합니다.
   - CHK001부터 순차적으로 번호 부류를 지정합니다.
   - 각 `/speckit.checklist` 실행은 새로운 파일을 생성합니다 (기존 체크리스트를 덮어쓰지 않음).

   **핵심 원칙 - 구현이 아닌 요구 사항을 테스트하십시오**:
   모든 체크리스트 항목은 다음 관점에서 요구 사항 자체를 평가해야 합니다:
   - **완전성 (Completeness)**: 필요한 모든 요구 사항이 있는가?
   - **명확성 (Clarity)**: 요구 사항이 모호하지 않고 구체적인가?
   - **일관성 (Consistency)**: 요구 사항들이 서로 조화를 이루는가?
   - **측정 가능성 (Measurability)**: 요구 사항을 객관적으로 검증할 수 있는가?
   - **커버리지 (Coverage)**: 모든 시나리오/예외 케이스가 다뤄졌는가?

   **카테고리 구조** - 요구 사항 품질 차원에 따라 항목을 그룹화합니다:
   - **요구 사항 완전성** (필요한 모든 요구 사항이 문서화되었는가?)
   - **요구 사항 명확성** (요구 사항이 구체적이고 모호하지 않은가?)
   - **요구 사항 일관성** (요구 사항들이 충돌 없이 정렬되었는가?)
   - **수락 기준 품질** (성공 기준이 측정 가능한가?)
   - **시나리오 커버리지** (모든 흐름/케이스가 다뤄졌는가?)
   - **예외 케이스 커버리지** (경계 조건이 정의되었는가?)
   - **비기능 요구 사항** (성능, 보안, 접근성 등 - 명시되었는가?)
   - **의존성 및 가정** (문서화되고 검증되었는가?)
   - **모호성 및 충돌** (무엇을 명확히 해야 하는가?)

   **체크리스트 항목 작성법 - "한국어를 위한 단위 테스트"**:

   ❌ **틀린 예** (구현 테스트):
   - "랜딩 페이지에 에피소드 카드 3개가 표시되는지 확인"
   - "데스크톱에서 호버 상태가 작동하는지 테스트"
   - "로고 클릭 시 홈으로 이동하는지 확인"

   ✅ **올바른 예** (요구 사항 품질 테스트):
   - "추천 에피소드의 정확한 수와 레이아웃이 명시되었는가?" [완전성]
   - "'눈에 띄는 표시'가 구체적인 크기/위치로 정량화되었는가?" [명확성]
   - "모든 상호작용 UI 요소에서 호버 상태 요구 사항이 일관되게 정의되었는가?" [일관성]
   - "모든 상호작용 UI에 대해 키보드 내비게이션 요구 사항이 정의되었는가?" [커버리지]
   - "로고 이미지 로드 실패 시의 폴백 동작이 명시되었는가?" [예외 케이스]
   - "비동기 에피소드 데이터에 대한 로딩 상태가 정의되었는가?" [완전성]
   - "사양에서 경쟁하는 UI 요소들에 대한 시각적 계층 구조를 정의하고 있는가?" [명확성]

   **항목 구조**:
   각 항목은 다음 패턴을 따라야 합니다:
   - 요구 사항 품질을 묻는 질문 형식
   - spec/plan에 '작성된 것'(또는 작성되지 않은 것)에 집중
   - 대괄호 안에 품질 차원 포함 [완전성/명확성/일관성/등]
   - 기존 요구 사항을 확인할 때 사양 섹션 참조 `[Spec §X.Y]`
   - 누락된 요구 사항을 확인할 때 `[Gap]` 마커 사용

   **품질 차원별 예시**:

   완전성:
   - "모든 API 실패 모드에 대해 에러 처리 요구 사항이 정의되었는가? [Gap]"
   - "모든 상호작용 요소에 대해 접근성 요구 사항이 명시되었는가? [완전성]"
   - "반응형 레이아웃에 대해 모바일 브레이크포인트 요구 사항이 정의되었는가? [Gap]"

   명확성:
   - "'빠른 로딩'이 특정 시간 임계값으로 정량화되었는가? [명확성, Spec §NFR-2]"
   - "'관련 에피소드' 선택 기준이 명시적으로 정의되었는가? [명확성, Spec §FR-5]"
   - "'눈에 띄는'이 측정 가능한 시각적 속성으로 정의되었는가? [모호성, Spec §FR-4]"

   일관성:
   - "모든 페이지에서 내비게이션 요구 사항이 일치하는가? [일관성, Spec §FR-10]"
   - "카드 컴포넌트 요구 사항이 랜딩 페이지와 상세 페이지 간에 일관적인가? [일관성]"

   커버리지:
   - "데이터가 없는 시나리오(제로 상태)에 대한 요구 사항이 정의되었는가? [커버리지, 예외 케이스]"
   - "동시 사용자 상호작용 시나리오가 다뤄졌는가? [커버리지, Gap]"
   - "부분적 데이터 로딩 실패에 대한 요구 사항이 명시되었는가? [커버리지, 예외 흐름]"

   측정 가능성:
   - "시각적 계층 구조 요구 사항이 측정/테스트 가능한가? [수락 기준, Spec §FR-1]"
   - "'균형 잡힌 시각적 무게감'을 객관적으로 검증할 수 있는가? [측정 가능성, Spec §FR-2]"

   **시나리오 분류 및 커버리지** (요구 사항 품질 집중):
   - 기본, 대체, 예외/에러, 복구, 비기능 시나리오에 대한 요구 사항이 존재하는지 확인합니다.
   - 각 시나리오 클래스에 대해 묻습니다: "[시나리오 유형] 요구 사항이 완전하고 명확하며 일관적인가?"
   - 시나리오 클래스가 누락된 경우: "[시나리오 유형] 요구 사항이 의도적으로 제외되었는가, 아니면 누락되었는가? [Gap]"
   - 상태 변경이 발생하는 경우 복원력/롤백을 포함합니다: "마이그레이션 실패에 대한 롤백 요구 사항이 정의되었는가? [Gap]"

   **추적성 요구 사항**:
   - 최소: 항목의 80% 이상이 하나 이상의 추적성 참조를 포함해야 함
   - 각 항목은 사양 섹션 `[Spec §X.Y]`을 참조하거나 `[Gap]`, `[모호성]`, `[충돌]`, `[가정]` 마커를 사용해야 함
   - ID 시스템이 없는 경우: "요구 사항 및 수락 기준 ID 체계가 수립되었는가? [추적성]"

   **이슈 노출 및 해결** (요구 사항 품질 문제):
   요구 사항 자체에 대해 질문하십시오:
   - 모호성: "'빠름'이라는 용어가 특정 지표로 정량화되었는가? [모호성, Spec §NFR-1]"
   - 충돌: "내비게이션 요구 사항이 §FR-10과 §FR-10a 간에 충돌하는가? [충돌]"
   - 가정: "'항상 사용 가능한 팟캐스트 API'라는 가정이 검증되었는가? [가정]"
   - 의존성: "외부 팟캐스트 API 요구 사항이 문서화되었는가? [의존성, Gap]"
   - 정의 누락: "'시각적 계층 구조'가 측정 가능한 기준으로 정의되었는가? [Gap]"

   **내용 통합**:
   - 소프트 캡: 원본 후보 항목이 40개를 초과하면 위험/영향도에 따라 우선순위를 정합니다.
   - 동일한 요구 사항 측면을 확인하는 유사 중복 항목을 병합합니다.
   - 영향도가 낮은 예외 케이스가 5개를 초과하면 하나의 항목으로 만듭니다: "요구 사항에서 예외 케이스 X, Y, Z가 다뤄졌는가? [커버리지]"

   **🚫 절대 금지** - 이들은 요구 사항 테스트가 아닌 구현 테스트로 만듭니다:
   - ❌ "확인(Verify)", "테스트(Test)", "확언(Confirm)", "체크(Check)" + 구현 동작으로 시작하는 모든 항목
   - ❌ 코드 실행, 사용자 작업, 시스템 동작에 대한 참조
   - ❌ "올바르게 표시됨", "제대로 작동함", "예상대로 기능함"
   - ❌ "클릭", "이동", "렌더링", "로드", "실행"
   - ❌ 테스트 케이스, 테스트 계획, QA 절차
   - ❌ 구현 세부 사항 (프레임워크, API, 알고리즘)

   **✅ 권장 패턴** - 이들은 요구 사항 품질을 테스트합니다:
   - ✅ "[시나리오]에 대해 [요구 사항 유형]이 정의/명시/문서화되었는가?"
   - ✅ "[모호한 용어]가 구체적인 기준으로 정량화/명확화되었는가?"
   - ✅ "요구 사항이 [섹션 A]와 [섹션 B] 간에 일관적인가?"
   - ✅ "[요구 사항]을 객관적으로 측정/검증할 수 있는가?"
   - ✅ "요구 사항에서 [예외 케이스/시나리오]가 다뤄졌는가?"
   - ✅ "사양에서 [누락된 측면]을 정의하고 있는가?"

6. **구조 참조**: 제목, 메타 섹션, 카테고리 헤딩, ID 형식을 위해 `.specify/templates/checklist-template.md`의 표준 템플릿을 따라 체크리스트를 생성합니다. 템플릿을 사용할 수 없는 경우: H1 제목, 목적/생성일 메타 라인, CHK001부터 시작하여 전역적으로 증가하는 ID를 가진 `- [ ] CHK### <요구 사항 항목>` 라인을 포함하는 `##` 카테고리 섹션을 사용합니다.

7. **보고**: 생성된 체크리스트의 전체 경로, 항목 수를 출력하고 각 실행이 새로운 파일을 생성함을 사용자에게 상기시킵니다. 다음을 요약하십시오:
   - 선택된 집중 영역
   - 깊이 수준
   - 행위자/시점
   - 통합된 사용자가 명시한 필수 항목

**중요**: 각 `/speckit.checklist` 명령 호출은 파일이 이미 존재하지 않는 한 짧고 설명적인 이름을 사용하여 체크리스트 파일을 생성합니다. 이는 다음을 가능하게 합니다:
- 다양한 유형의 여러 체크리스트 (예: `ux.md`, `test.md`, `security.md`)
- 체크리스트 목적을 나타내는 간단하고 기억하기 쉬운 파일명
- `checklists/` 폴더 내에서의 쉬운 식별 및 탐색

복잡함을 피하기 위해 설명적인 유형을 사용하고 완료된 후에는 더 이상 필요 없는 체크리스트를 정리하십시오.

## 체크리스트 유형 예시 및 샘플 항목

**UX 요구 사항 품질:** `ux.md`

샘플 항목 (구현이 아닌 요구 사항을 테스트):
- "시각적 계층 구조 요구 사항이 측정 가능한 기준으로 정의되었는가? [명확성, Spec §FR-1]"
- "UI 요소의 수와 배치가 명시적으로 규정되었는가? [완전성, Spec §FR-1]"
- "상호작용 상태 요구 사항(호버, 포커스, 액티브)이 일관되게 정의되었는가? [일관성]"
- "모든 상호작용 요소에 대해 접근성 요구 사항이 명시되었는가? [커버리지, Gap]"
- "이미지 로드 실패 시의 폴백 동작이 정의되었는가? [예외 케이스, Gap]"
- "'눈에 띄는 표시'를 객관적으로 측정할 수 있는가? [측정 가능성, Spec §FR-4]"

**API 요구 사항 품질:** `api.md`

샘플 항목:
- "모든 실패 시나리오에 대해 에러 응답 형식이 명시되었는가? [완전성]"
- "속도 제한 요구 사항이 특정 임계값으로 정량화되었는가? [명확성]"
- "모든 엔드포인트에서 인증 요구 사항이 일관적인가? [일관성]"
- "외부 의존성에 대해 재시도/타임아웃 요구 사항이 정의되었는가? [커버리지, Gap]"
- "요구 사항에 버전 관리 전략이 문서화되었는가? [Gap]"

**성능 요구 사항 품질:** `performance.md`

샘플 항목:
- "성능 요구 사항이 특정 지표로 정량화되었는가? [명확성]"
- "모든 핵심 사용자 여정에 대해 성능 목표가 정의되었는가? [커버리지]"
- "다양한 부하 조건에서의 성능 요구 사항이 명시되었는가? [완전성]"
- "성능 요구 사항을 객관적으로 측정할 수 있는가? [측정 가능성]"
- "높은 부하 시나리오에 대해 성능 저하(Degradation) 요구 사항이 정의되었는가? [예외 케이스, Gap]"

**보안 요구 사항 품질:** `security.md`

샘플 항목:
- "모든 보호된 리소스에 대해 인증 요구 사항이 명시되었는가? [커버리지]"
- "민감한 정보에 대해 데이터 보호 요구 사항이 정의되었는가? [완전성]"
- "위협 모델이 문서화되고 요구 사항이 그에 맞춰 정렬되었는가? [추적성]"
- "보안 요구 사항이 규정 준수 의무와 일관적인가? [일관성]"
- "보안 실패/침해 대응 요구 사항이 정의되었는가? [Gap, 예외 흐름]"

## 안 좋은 예시: 하지 말아야 할 것

**❌ 틀림 - 이들은 요구 사항이 아닌 구현을 테스트함:**

```markdown
- [ ] CHK001 - 랜딩 페이지에 에피소드 카드 3개가 표시되는지 확인 [Spec §FR-001]
- [ ] CHK002 - 데스크톱에서 호버 상태가 올바르게 작동하는지 테스트 [Spec §FR-003]
- [ ] CHK003 - 로고 클릭 시 홈 페이지로 이동하는지 확언 [Spec §FR-010]
- [ ] CHK004 - 관련 에피소드 섹션에 3-5개 항목이 표시되는지 체크 [Spec §FR-005]
```

**✅ 올바름 - 이들은 요구 사항 품질을 테스트함:**

```markdown
- [ ] CHK001 - 추천 에피소드의 수와 레이아웃이 명시적으로 규정되었는가? [완전성, Spec §FR-001]
- [ ] CHK002 - 모든 상호작용 요소에 대해 호버 상태 요구 사항이 일관되게 정의되었는가? [일관성, Spec §FR-003]
- [ ] CHK003 - 모든 클릭 가능한 브랜드 요소에 대해 내비게이션 요구 사항이 명확한가? [명확성, Spec §FR-010]
- [ ] CHK004 - 관련 에피소드의 선택 기준이 문서화되었는가? [Gap, Spec §FR-005]
- [ ] CHK005 - 비동기 에피소드 데이터에 대한 로딩 상태 요구 사항이 정의되었는가? [Gap]
- [ ] CHK006 - "시각적 계층 구조" 요구 사항을 객관적으로 측정할 수 있는가? [측정 가능성, Spec §FR-001]
```

**주요 차이점:**
- 틀린 예: 시스템이 올바르게 작동하는지 테스트
- 올바른 예: 요구 사항이 올바르게 작성되었는지 테스트
- 틀린 예: 동작 확인
- 올바른 예: 요구 사항 품질 검증
- 틀린 예: "그것이 X를 하는가?"
- 올바른 예: "X가 명확하게 명시되었는가?"
"""
